# [Intent (Намерение)](http://developer.alexanderklimov.ru/android/theory/intent.php)
это механизм для описания одной операции - выбрать фотографию, отправить письмо, сделать звонок, запустить браузер и перейти по указанному адресу

1. **Явные намерения(Explicit Intent)**
     ```kotlin
     // первое Activity  
      val intent = Intent(this, DisplayMessageActivity::class.java).apply {
               putExtra(EXTRA_MESSAGE, message)
           }
           startActivity(intent) 
           
      // второе Activity
      val message = intent.getStringExtra(EXTRA_MESSAGE)     
      ```
      * Мы **явно** указываем имя класса при создании интента(вторым параметром)
      * Данный класс **обязательно** должен быть прописан в манифесте
      * **putExtra** - передача чего либо из активности в активность (ключ-значение)
      * **startActivity()**
      * **startActivityForResult()**
      * **intent.getStringExtra** получение строковых данных из другой активности
2. **Неявные намерения(Implicit Intent)**
    ```kotlin
   binding.button.setOnClickListener(){
            val intent = Intent().apply {
                action = Intent.ACTION_SEND
                type = TYPE
                putExtra(INTENT_TEXT,"Hello from text project")
            }
            startActivity(intent)
        }
    }
    private companion object{
        private const val INTENT_TEXT="intent_text"
        private const val TYPE = "text/plain"
    } 
   ```
   * при клике на кнопку созается намерение
   * при создании намерения мы используем не имя класса, а указываем параметры (**action**, **data**, **category**) с определёнными значениями.
   * Система сканирует активности всех установленных приложений, и если находится несколько подходящих активностей, то Android предоставляет пользователю выбор, какой именно программой следует воспользоваться.
   * Создавая новое неявное намерение для передачи в метод startActivity(), необходимо назначить действие, которое должно выполниться, а также при желании указать вспомогательный путь URI к тем данным, что нужно обработать. Вы также можете передать дополнительные данные в другую активность, используя параметр намерения extras.

    **Константы**

    | Константы действия  |  |
    |---|---|
    | ACTION_ANSWER  | Открывает активность, которая связана с входящими звонками. Это действие обрабатывается стандартным экраном для приёма звонков;  |
    | ACTION_CALL| инициализирует обращение по телефону;|
    | ACTION_DELETE |Запускает активность, с помощью которой можно удалить данные, указанные в пути URI внутри намерения;   |
    |ACTION_EDIT|Отображает данные для редактирования пользователем   |
    |ACTION_INSERT|Открывает активность для вставки в Курсор (Cursor) нового элемента, указанного с помощью пути URI. Дочерняя активность, вызванная с этим действием, должна вернуть URI, ссылающийся на вставленный элемент   |
    |ACTION_HEADSET_PLUG|Подключение наушников   |
    |ACTION_MAIN|Запускается как начальная активность задания   |
    |ACTION_PICK|Загружает дочернюю Активность, позволяющую выбрать элемент из источника данных, указанный с помощью пути URI. При закрытии должен возвращаться URI, ссылающийся на выбранный элемент. Активность, которая будет запущена, зависит от типа выбранных данных, например при передаче пути content://contacts/people вызовется системный список контактов;   |
    |ACTION_SEARCH|Запускает активность для выполнения поиска. Поисковый запрос хранится в виде строки в дополнительном параметре намерения по ключу SearchManager.QUERY   |
    |ACTION_SEND|Загружает экран для отправки данных, указанных в намерении. Контакт-получатель должен быть выбран с помощью полученной активности. Используйте метод setType, чтобы указать тип MIME для передаваемых данных. Эти данные должны храниться в параметре намерения extras с ключами EXTRA_TEXT или EXTRA_STREAM, в зависимости от типа. В случае с электронной почтой стандартное приложение в Android также принимает дополнительные параметры по ключам EXTRA_EMAIL, EXTRA_CC, EXTRA_BCC и EXTRA_SUBJECT. Используйте действие ACTION_SEND только в тех случаях, когда данные нужно передать удаленному адресату (а не другой программе на том же устройстве)   |
    |ACTION_SENDTO   |Открывает активность для отправки сообщений контакту, указанному в пути URI, который передаётся через намерение   |
    |ACTION_SYNC   |Синхронизирует данные сервера с данными мобильного устройства   |
    |ACTION_TIMEZONE_CHANGED   |Смена часового пояса   |
    |ACTION_VIEW    |Наиболее распространённое общее действие. Для данных, передаваемых с помощью пути URI в намерении, ищется наиболее подходящий способ вывода. Выбор приложения зависит от схемы (протокола) данных. Стандартные адреса http: будут открываться в браузере, адреса tel: — в приложении для дозвона, geo: — в программе Google Maps, а данные о контакте — отображатся в приложении для управления контактной информацией   |
    |ACTION_WEB_SEARCH    |Открывает активность, которая ведет поиск в интернете, основываясь на тексте, переданном с помощью пути URI (как правило, при этом запускается браузер)   |

    |Константы категорий    |   |
    |---|---|
    |CATEGORY_BROWSABLE    |активность может быть безопасно вызвана браузером, чтобы отобразить ссылочные данные, например, изображение или почтовое сообщение   |
    |CATEGORY_HOME    |активность отображает Home Screen, первый экран, который пользователь видит после включения устройства и загрузки системы, или когда нажимает клавишу HOME   |
    |CATEGORY_LAUNCHER     |активность может быть начальной деятельностью задания из списка приложений в группе Application Launcher устройства   |


    |Методы|   |
    |---|---|
    |addCategory()    | помещает категорию в объект Intent  |
    |removeCategory() | удаляет категорию, которая была добавлена ранее  |
    |getCategories()    |получает набор всех категорий, находящихся в настоящее время в объекте Intent   |
3. **Фильтры намерений и запуск заданий**
   ```xml
    <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="android.intent.action.SEND" />

                <data android:mimeType="text/plain" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
   ```
   * Задействуя фильтры намерений, приложения объявляют, что они могут отвечать на действия, запрашиваемые любой другой программой, установленной на устройстве. Чтобы зарегистрировать компонент приложения в качестве потенциального обработчика намерений, нужно добавить тег **< intent-filter >** в узел компонента в манифесте.
   * В фильтре намерений декларируется только три составляющих объекта Intent:

|          |                      |                                                                                                                                                                                                                                                                                                                                                      |
|:---------|:---------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| action   |                      | Использует атрибут android:name, чтобы задать название действия, которое будет обслуживаться. Каждый фильтр намерений должен иметь один (и только один) тег action. Действия должны быть представлены в виде уникальных строк, которые сами себя описывают. Рекомендуется выбирать названия, основываясь на соглашении об именовании пакетов в Java. |
| сategory |                      | Использует атрибут android:name, чтобы указать, при каких обстоятельствах должно обслуживаться действие. Каждый тег intent-filter способен содержать несколько тегов category. Вы можете задать собственные категории или же брать стандартные значения, предоставляемые системой                                                                    |
|          | ALTERNATIVE          | Наличие данной категории говорит о том, что действие должно быть доступно в качестве альтернативного тому, которое выполняется по умолчанию для элемента этого типа данных. Например, если действие по умолчанию для контакта — просмотр, то в качестве альтернативы его также можно редактировать                                                   |
|          | SELECTED_ALTERNATIVE | То же самое, что и ALTERNATIVE, но вместо одиночного действия с использованием утверждения намерения, которое описано выше, применяется в тех случаях, когда нужен список различных возможностей. Одной из функций фильтра намерений может стать динамическое заполнение контекстного меню с помощью действий.                                       |
|          | BROWSABLE            | Говорит о том, что действие доступно из браузера. Когда намерение срабатывает в браузере, оно всегда содержит данную категорию. Если вы хотите, чтобы приложение реагировало на действия, инициированные браузером (такие как перехват ссылок на конкретный сайт), то должны добавить в его манифест категорию BROWSABLE.                            |
|          | DEFAULT              | Установите эту категорию, чтобы сделать компонент обработчиком по умолчанию для действия, выполняемого с указанным типом данных внутри Фильтра намерений. Это необходимо и для Активностей, которые запускаются с помощью явных Намерений                                                                                                            |
|          | GADGET               | Наличие этой категории указывает на то, что данная активность может запускаться внутри другой активности.                                                                                                                                                                                                                                            |
|          | HOME                 | Устанавливая эту категорию и не указывая при этом действия, вы создаете альтернативу для стандартного домашнего экрана.                                                                                                                                                                                                                              |
|          | LAUNCHER             | Используя эту категорию, вы помещаете Активность в окно для запуска приложений.                                                                                                                                                                                                                                                                      |
| data     |                      | Этот тег дает возможность указать тип данных, с которым может взаимодействовать ваш компонент. При необходимости можно задать несколько тегов data. Чтобы указать, какие именно данные поддерживает ваш компонент, используйте сочетание следующих атрибутов:                                                                                        |
|          | android:host         | задаёт доступное имя удалённого сервера (например, google.com);                                                                                                                                                                                                                                                                                      |
|          | android:mimetype     | позволяет указать тип данных, которые ваш компонент способен обрабатывать. Для примера: <type android: value="vnd.android.cursor.dir/*"/ > будет соответствовать любому Курсору в Android;                                                                                                                                                           |
|          | android:path         | задает доступные значения для пути URI (например, /transport/boats/);                                                                                                                                                                                                                                                                                |
|          | android:path         | задает доступные значения для пути URI (например, /transport/boats/);                                                                                                                                                                                                                                                                                |
|          | android:port         | указывает доступные порты для заданного сервера;                                                                                                                                                                                                                                                                                                     |
|          |  android:scheme                     |   требует указать конкретную схему (например, content или http).                                                                                                                                                                                                                                                                                                                                                    |

   ```kotlin
   val intentText = intent?.getStringExtra(INTENT_TEXT)
        if (intentText != null){
            binding.textView.text=intentText
        }
   ```


